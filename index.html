<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="styles.css">
        <meta charset="utf-8"/>
    </head>
    
    <body>

        <div id="barSign">
            <div id="signImgContainer">
                <img id="signImg" height="120px" width="150px" src="tavern.png"></img>
            </div>
            <div id="titContainer">
                <div id="title">The Thirsty Fist</div>
            </div>
            <div id ="scoringContainer">
                <div id="scoring">
                    <p>Beers: </p>
                    <p id="resultsTallyText">0</p>
                </div>
            </div>
        </div>

        <div id="introText">
            <p id='tag'>Welcome to The Thirsty Fist. We don't accept money here. If you can beat the barman at Rock Paper Scissors, you earn a beer!</p>
        </div>
        <div id="colourTest">
            <p id='colorBlocks'></p>
        </div>

<!--         <div id="wallpaper?">
            <label for="theme">Want to change the wallpaper?</label>

            <select id="theme">
                <option value="White">White</option>
                <option value="Black">Black</option>
                <option value="Green">Green</option>
                <option value="Blue">Blue</option>
                <option value="Red">Red</option>
            </select>
        </div> -->

        <div id="annouceArea">

            <div id="playerTitle" class="areaColumn">
                <h2>Make your choice:</h2>
            </div>

            <div id ="results" class="areaColumn">
                <h2 id="resultText"></h2>
            </div>

            <div id="compTitle" class="areaColumn">
                <h2>Barman chooses:</h2>
            </div>

        </div>

        <div id="gameArea">

            <div id="playerHand" class="areaColumn">

                <div id ="imgBox" height="350px" width="400px">
                    <img id="img_placeholder" height="300px" width="400px" src="Rockpix.png"></img>
                </div>
                <br>
                <div id="swapButtons">
                    <button id="prev" class="LaR" type="button" ><</button>
                    <button id="next" class="LaR" type="button" >></button>
                </div>
            
            </div>
                

            <div id="resultsArea" class="areaColumn">

                <div id="resultsWords">
                    <p id="chosenHand" class="summText">Rock</p>
                    <p id="vsText" class="summText"></p>
                    <p id="compChoiceHand" class="summText"></p>
                </div>

                <button type="button" id="ChooseButton">Choose!</button>

            </div>

<!--             <label for="playerHand">What will you choose?</label>

            <select id="playerHand">
                <option value="">--hand--</option>
                <option value="Rock">Rock</option>
                <option value="Paper">Paper</option>
                <option value="Scissors">Scissors</option>
            </select> -->

            <div id="computerChoice" class="areaColumn">

                <div id ="compPicture" height="350px" width="400px">
                    <img id="comp_placeholder" height="300px" width="400px" src="Rockpix.png" style="transform: scaleX(-1);"></img>
                </div>
                
            </div>

        </div>


        



<!-- Javascript -->

        <script>

            let chosenHandChoice;
            let plrHand = document.getElementById("img_placeholder");
            let cmpHand = document.getElementById("comp_placeholder");
            let imgContain = document.getElementById("imgBox");
            let computerSelection;
            let resultSummary;
            let resultsTally = 0;
            let handSelect = document.querySelector("#playerHand");
            // const BGselect = document.querySelector("#theme");
            let RPSarray = ['Rockpix.png', 'Paperpix.png', 'Scissorspix.png'];
            let tempNum;
            let imgString;
            const body = document.querySelector('body');
            var frequency = .3;
            var amplitude = 127;
            var center = 128;

            document.getElementById("prev").onclick = function(){
                resetText();
                imgString = document.getElementById("chosenHand").innerText;
                imgString = imgString.concat("pix.png");
                tempNum = RPSarray.indexOf(imgString);

                if (tempNum == 0) {
                        tempNum = 2;
                    } else {
                        tempNum --;
                    }
                    
                plrHand.src = RPSarray[tempNum];
                imgString = RPSarray[tempNum];
                imgString = imgString.replace("pix.png", "");
                document.getElementById("chosenHand").innerText = imgString;
            }

            document.getElementById("next").onclick = function(){
                resetText();
                imgString = document.getElementById("chosenHand").innerText;
                imgString = imgString.concat("pix.png");
                tempNum = RPSarray.indexOf(imgString);

                if (tempNum == 2) {
                        tempNum = 0;
                    } else {
                        tempNum ++;
                    }
                    
                plrHand.src = RPSarray[tempNum];
                imgString = RPSarray[tempNum];
                imgString = imgString.replace("pix.png", "");
                document.getElementById("chosenHand").innerText = imgString;
            }

            function resetText(){
                document.getElementById("vsText").innerText = "";
                document.getElementById("compChoiceHand").innerText = "";
                document.getElementById("resultText").innerText = "";

            }



 /*                 switch(Direction){
                    case "prev":
                    if (tempNum = 0) {
                        tempNum = 3;
                    } else {
                        tempNum = tempNum -1;
                    }
                    plrHand.src = RPSarray(tempNum);
                    break;
                    case "next":
                    if (tempNum = 3) {
                        tempNum = 0;
                    } else {
                        tempNum = tempNum +1;
                    }
                    plrHand.src = RPSarray(tempNum);
                    break;
                } */

            //Background color change

/*             BGselect.addEventListener("change", updateBG);
            
            function updateBG() {
                switch(BGselect.value){
                    case "Black":
                    body.style.backgroundColor = 'black';
                    body.style.color = 'white';
                    break;
                    case "White":
                    body.style.backgroundColor = 'white';
                    body.style.color = 'black';
                    break;
                    case "Green":
                    body.style.backgroundColor = 'green';
                    body.style.color = 'purple';
                    break;
                    case "Blue":
                    body.style.backgroundColor = 'blue';
                    body.style.color = 'yellow';
                    break;
                    case "Red":
                    body.style.backgroundColor = 'red';
                    body.style.color = 'white';
                    break;
                }

            } */
        
            //player hand change
        
/*             handSelect.addEventListener("change", handChoose);

            function handChoose(){
                chosenHandChoice = handSelect.value;
                document.getElementById("chosenHand").innerText = chosenHandChoice;
                switch (chosenHandChoice){
                    case "Rock":
                        plrHand.src = "Rockpix.png";
                        break;
                    case "Paper":
                        plrHand.src = "Paperpix.png";
                        break;
                    case "Scissors":
                        plrHand.src = "Scissorspix.png";
                        break;
                }
            } */

            //process round and computer hand change

            document.getElementById("ChooseButton").onclick = function(){

                chosenHandChoice = document.getElementById("chosenHand").innerText
                chosenHandChoice = chosenHandChoice.replace("pix.png", "");

                resultsTally = document.getElementById("resultsTallyText").innerText;

                let randomNum = Math.floor((Math.random()*3)+1);

                console.log(randomNum)
                
                if (randomNum == 1){
                    computerSelection = "Rock";
                    document.getElementById("comp_placeholder").src = "Rockpix.png";
                    if (chosenHandChoice == "Rock") {
                        resultSummary = "Draw";
                    }
                    else if (chosenHandChoice == "Paper"){
                        resultSummary = "Win";
                    }
                    else if (chosenHandChoice == "Scissors"){
                        resultSummary = "Lose";
                        loseRound();
                    }
                    
                }
                else if (randomNum == 2){
                    computerSelection = "Paper";
                    document.getElementById("comp_placeholder").src = "Paperpix.png";
                    if (chosenHandChoice == "Paper") {
                        resultSummary = "Draw";
                    }
                    else if (chosenHandChoice == "Rock"){
                        resultSummary = "Lose";
                        loseRound();
                    }
                    else if (chosenHandChoice == "Scissors"){
                        resultSummary = "Win";
                    }

                }
                else if (randomNum == 3){
                    computerSelection = "Scissors";
                    document.getElementById("comp_placeholder").src = "Scissorspix.png";
                    if (chosenHandChoice == "Scissors") {
                        resultSummary = "Draw";
                    }
                    else if (chosenHandChoice == "Paper"){
                        resultSummary = "Lose";
                        loseRound();
                    }
                    else if (chosenHandChoice == "Rock"){
                        resultSummary = "Win";
                    }
                    
                }
                
                document.getElementById("vsText").innerText = "Vs";

                document.getElementById("compChoiceHand").innerText = computerSelection;

                document.getElementById("resultText").innerText = "You " +resultSummary+ "!";
                 
                if (resultSummary == "Win"){
                    resultsTally++;
                }
                else if (resultSummary == "Lose"){
                    resultsTally--;
                }

                document.getElementById("resultsTallyText").innerText = resultsTally;
        }

        function loseRound(){
       // linear interpolation between two values a and b
        // u controls amount of a/b and is in range [0.0,1.0]
        lerp = function(a,b,u) {
            return (1-u) * a + u * b;
        };
        
        fade = function(element, property, start, end, duration) {
        var interval = 10;
        var steps = duration/interval;
        var step_u = 1.0/steps;
        var u = 0.0;
        var theInterval = setInterval(function(){
            if (u >= 1.0){ clearInterval(theInterval) }
            var r = parseInt(lerp(start.r, end.r, u));
            var g = parseInt(lerp(start.g, end.g, u));
            var b = parseInt(lerp(start.b, end.b, u));
            var colorname = 'rgb('+r+','+g+','+b+')';
            el.style.setProperty(property, colorname);
            u += step_u;
        }, interval);
        };
        
        // in action
        el = document.body; // your element
        property = 'background-color';       // fading property
        startColor = {r:117, g:  66, b:  7};  // red
        endColor   = {r:  255, g:66, b:7};  // dark turquoise

        for (let i = 0; i <= 6; i++){
        fade(el,'background-color',startColor,endColor,100);
        setTimeout(function(){
            fade(el,'background-color',endColor,startColor,100);
        },200); 

        };

        }                                    
    
        </script>


    </body>
</html>